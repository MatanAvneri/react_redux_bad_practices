<!doctype html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

    <title>React/Redux Bad Practices</title>
    <link href="data:image/x-icon;base64,AAABAAEAEBAQAAEABAAoAQAAFgAAACgAAAAQAAAAIAAAAAEABAAAAAAAgAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAD/APf39wAFBQUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEREREREAAAETMzMzMRAAETMiIiIzEQETMiIiIiMxERMzMzMzMzERERERERERERERERERERERERETMRETMRERERMxERMxEREREzEREzERERETMRETMRERERERERERERERExERETEREBEzERERMxEAAzERERETMAADEREREREwDgBwAAwAMAAIABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgAEAAMADAADAAwAA"
          rel="icon" type="image/x-icon"/>
    <link rel="stylesheet" href="css/reveal.css">
    <link rel="stylesheet" href="css/theme/black.css">

    <!-- Theme used for syntax highlighting of code -->
    <link rel="stylesheet" href="lib/css/zenburn.css">

    <!-- Printing and PDF exports -->
    <script>
      var link = document.createElement('link');
      link.rel = 'stylesheet';
      link.type = 'text/css';
      link.href = window.location.search.match(/print-pdf/gi) ? 'css/print/pdf.css' : 'css/print/paper.css';
      document.getElementsByTagName('head')[0].appendChild(link);
    </script>
</head>
<body>
<div class="reveal">
    <div class="slides">
        <section>
            <h1>React/Redux</h1>
            <h2>Bad Practices</h2>
        </section>
        <section>
            <h1>Matan Avneri</h1>
            <h2>Tech Lead @</h2>
            <img data-no-style src='./lib/images/zooz_payu_company.png' alt="zooz a payU company"/>
        </section>
        <section>
            <section>
                <h1>React</h1>
                <pre><code data-trim data-noescape>
                  componentDidMount () {
                    setTimeout(() => {
                      this.breakEverything()
                    }, 100)
                  }
	            </code></pre>
            </section>
            <section>
                <img src="https://media.giphy.com/media/3Ot9RtMOfo5ag/giphy.gif" />
            </section>
        </section>
        <section>
            <section>
                <h1>
                    Reducers
                </h1>
            </section>
            <section>
                <aside class="notes">Several issues, no default return. No use for a reducer, reducer should have logic
                </aside>
                <h1>Reducers</h1>
                <pre><code data-trim data-noescape>
                    reducer = (state, action) => {
                        switch (action.type) {
                        case types.SEARCH: {
                            return {
                                ...state,
                                ...payload
                            }
                        }
                        case types.UPDATE: {
                            return {
                                ...state,
                                ...payload
                            }
                        }
                        case types.CREATE: {
                            return {
                                ...state,
                                ...payload
                            }
                        }
                        }
                    }
	            </code></pre>
            </section>
            <section>
                <p>
                    From
                    <a
                            href="https://redux.js.org/faq/code-structure#how-should-i-split-my-logic-between-reducers-and-action-creators-where-should-my-business-logic-go"
                            target="_blank">
                        redux documentation
                    </a>
                </p>
                <blockquote>
                    There's no single clear answer to exactly what pieces of logic should go in a reducer or an action
                    creator
                    <br/>...<br/>
                    Find the balance between these two extremes, and you will master Redux.
                </blockquote>
            </section>
            <section>
                <aside class="notes">Using non immutable functions:</aside>
                <h1>Reducer</h1>
                <pre><code data-trim data-noescape>
                reducer = (state, action) => {
                    switch (action.type) {
                    case types.ARRAY_ADD: {
                        return {
                            ...state,
                            items: state.items.push(action.item)
                        }
                    }
                    }
                }
	            </code></pre>
            </section>
            <section>
                <aside class="notes">Using non immutable functions:</aside>
                <h1>Reducer</h1>
                <p>
                    <a href="https://github.com/mweststrate/immer" target="_blank">immer</a> <br/>
                    <a href="https://facebook.github.io/immutable-js/docs/#/" target="_blank">Immutable.js</a>
                </p>
            </section>
        </section>
        <section>
            <aside class="notes">Action types can override one another</aside>
            <h1>Action Type</h1>
            <pre><code data-trim data-noescape>
                export function clearField (fieldId) {
                  return { type: 'CLEAR_FIELD', fieldId };
                }
	        </code></pre>
        </section>
        <section>
            Redux passing props to children along so you canâ€™t find the source (why not connect)
        </section>
        <section>
            Incorporating state and connect in the same component
        </section>
        <section>
            <aside class="notes">Using dispatch without action creators:</aside>
            <h1>Thunk</h1>
            <pre><code data-trim data-noescape>
                export const fetchPayment = ({ paymentId }) => async dispatch => {
                  dispatch({ type: FETCHING_PAYMENT, payload: true })

                  try {
                    const payment = await PaymentsApi.getPayment(paymentId)

                    dispatch({ type: FETCH_PAYMENT, payload: payment.data });
                  } catch (error) {
                    dispatch({ type: FETCH_ERROR, payload: error.message });
                  }
                  dispatch({ type: FETCHING_PAYMENT, payload: false })
                };
	        </code></pre>
        </section>
        <section>
            <section>
                <h1>State Read</h1>
                <pre><code data-trim data-noescape>
                const mapStateToProps = state => ({
                    environment: state.appReducer.info.environment
                });
    	        </code></pre>
            </section>
            <section>
                <h1>State Read</h1>
                <p>
                    <a href="https://github.com/reduxjs/reselect" target="_blank">Selectors</a>
                </p>
            </section>
        </section>
    </div>
</div>

<script src="lib/js/head.min.js"></script>
<script src="js/reveal.js"></script>

<script>
  // More info about config & dependencies:
  // - https://github.com/hakimel/reveal.js#configuration
  // - https://github.com/hakimel/reveal.js#dependencies
  Reveal.initialize({
    history: true,
    dependencies: [
      { src: 'plugin/markdown/marked.js' },
      { src: 'plugin/markdown/markdown.js' },
      { src: 'plugin/notes/notes.js', async: true },
      {
        src: 'plugin/highlight/highlight.js', async: true, callback: function () {
          hljs.initHighlightingOnLoad();
        }
      }
    ]
  });
</script>
</body>
</html>
